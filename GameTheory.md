# **Game Theory**

****

## 常见博弈

有 $n$ 堆石子，每人可以选择若干堆，每堆都拿走一个石子 $\Rightarrow$ 所有堆都有偶数个石子，则先手必败，否则必胜

****

## $Fibonacci\ Nim$

初始时有 $n$ 个石子，两个人轮流取石子。规则为：

* 先手第一次可以取 $1$ 到 $n - 1$ 个石子
* 之后每一次，可取的数量为 $1$ 到上一个人取的石子数的 $2$ 倍，不能取的人输

### $Zeckendorf's \ Theorem$

每个正整数可以唯一的写成一些不相邻的 $Fibonacci$ 数的和

### $PN$ 态

局面是 $P$ 态当且仅当 $n$ 为 $Fibonacci$ 数

### 扩展问题

初始时有 $n$ 个石子，两个人轮流取石子。规则为：

* 先手第一次可以取 $1$ 到 $n - 1$ 个石子
* 之后每一次，可取的数量为 $1$ 到上一个人取的石子数，不能取的人输

$conclusion：$ 当 $n$ 为 $2^k$ 时为 $P$ 态，否则为 $N$ 态

****

## $Chomp$

一开始有 $n \times m$ 块饼干，排列成一个 $n$ 行 $m$ 列的矩形，其中位于 $(1, 1)$ 的饼干是有毒的。两个人轮流进行游戏，每次可以：

* 取当前还没被取的一块饼干 $(x, y)$ ，并把所有 $(i,j) \ i \ge x \ and \ j \ge y$ 的饼干都吃掉。吃到有毒的饼干则输掉游戏，请问先手必胜还是后手必胜

### $PN$ 态

所有 $n, m$ ，满足 $max(n, m) > 1$ 的矩形均为 $N$ 态

证明：如果先手取 $(n, m)$ 时后手存在必胜策略 $(a, b)$ ，则先手可以直接取 $(a, b)$ 

### 有限偏序集上的 $Chomp$ 游戏

设偏序集 $(S, \le)$ ，其中 $S$ 有限，且 $S$ 中存在最小元。一开始 $T = S$ ，可以取 $x \in T$ ，并把 $x \le y$ 的元素 $y$ 从 $T$ 中去掉。取到最小元的人输

$conclusion：$ 如果偏序集 $(S, \le)$ 存在最大元，且 $|S| > 1$ ，则先手必胜

****

## $Wythoff$ 游戏

有两堆石子，石子数分别为 $n, m$ 。两个玩家轮流进行，轮到一方的玩家可以做：

* 从其中一推石子中取走 $x \ge 1$ 个（$x$ 不能超过该堆的石子数）
* 从两堆石子中同时取走 $x \ge 1$ 个 （$x$ 不能超过任意一堆的石子数）

### $PN$ 态

$P$ 态满足：

$a_i = \lfloor \phi \times i \rfloor \\ \ b_i = \lfloor \phi^2 \times i \rfloor$

其中 $\phi = \frac{1 + \sqrt{5}}{2}$

### $Beatty$ 序列

一个正无理数 $r$ 生成的 $Beatty$ 序列时指这样的一个序列：$\mathcal{B}_r = (\lfloor r \times i\rfloor)_{i\ge1}$

### $Rayleigh$ 定理

假设正无理数 $r > 1,\ s 满足\frac{1}{r} + \frac{1}{s}=1$，则 $\mathcal{B}_r$ 与 $\mathcal{B}_s$ 是全体正整数的一个划分。即任意一个正整数存在且仅存在于 $\mathcal{B}_r$ 和 $\mathcal{B}_s$ 的其中一个序列

****

## 二分图博弈

给出一个二分图（无向图）和一个起始点 $H$ ，两人轮流操作，每次只能选择一个没有被走过的点，并走到该相邻点，不能走的人输

$conclusion：$ 如果二分图的最大匹配一定包含起始点 $H$ ，则先手必胜，否则先手必败

必胜策略：

* 如果 $H$ 一定在最大匹配上，先手按 $H$ 的匹配边走到下一个点
* 如果 $H$ 不在其中一个最大匹配 $\mathcal{M}$ 上，不管先手走哪个点 $P$ ，后手按 $P$ 的匹配边走到下一个点

****

## $SG$  函数

对于每个状态 $i$ ，若可转移到状态 $j$ ，则将 $sg[j]$ 加入集合中；若将状态分裂成两个游戏 $j$ 和 $k$ ，则将 $sg[j]\  xor\  sg[k]$ 加入集合

### 阶梯 $Nim$

有 $n$ 堆石子，两个人轮流取，每次可以在第 $i$ 堆石子里面选若干石头放到 $i - 1$ 堆里面，谁不能操作即输。

变种：移棋子问题

$sg$值：偶数堆的石子数异或和

### 翻硬币模型

$n$ 枚硬币排成一排，有的正面朝上，有的反面朝上，我们从左开始对硬币按 $1到n$ 编号，两个人轮流根据某些约束翻硬币（如：每次只能翻一或两枚，或者每次只能翻连续的几枚），但他所翻动的硬币中，最右边的必须是从正面翻到反面，谁不能操作即输。

$sg$ 值等于每个硬币单独的 $sg$ 值的异或和

例如 $sg(0110101) = sg(01) \ \otimes \ sg(001) \ \otimes \ sg(00001) \ \otimes \ sg(0000001)$ 

对于二进制只含一个 $1$ 的状态再进行单独讨论、推到并计算 $sg$ 函数

### $N$ 阶 $Nim$

有 $k$ 堆石子，各包含 $x_1,x_2,\dots ,x_k$ 颗石子。双方玩家轮流操作，每次操作选择其中非空的若干堆，至少一堆但不超过 $N$ 堆，在这若干堆中每堆各取走其中的若干颗石子（$1$ 颗，$2$ 颗 $\dots$ 甚至整堆），数目可以不同，取走最后一颗石子的玩家获胜。

结论：当且仅当在每一个不同的二进制位上，$x_1,x_2,\dots,x_k$ 中在该位上 $1$ 的个数都是 $N + 1$ 的倍数时，后手方有必胜策略，否则先手必胜。（仅能判胜负，非 $sg$ 值）

### $Anti - SG$

对于任意一个 $Anti-SG$ 游戏，如果我们规定当局面中所有的单一游戏的 $SG$ 值为 $0$ 时，游戏结束（操作的人失败），则先手必胜当且仅当：

（1）游戏的 $SG$ 函数不为 $0$ 且游戏中某个单一游戏的 $SG$ 函数大于 $1$ 

（2）游戏的 $SG$ 函数为 $0$ 且游戏中没有单一游戏的 $SG$ 函数大于 $1$ 

****

## $Nim$ 积

定义 $x \otimes y := mex \{ (x \otimes b) \oplus(a \otimes y) \oplus (a \otimes b) \ | \ 0 \leq a < x, 0 \leq b < y \}$ 

满足交换律，结合律，分配律；存在单位元，逆元 

$(\mathbb{N},\oplus,\otimes)$ 是一个域

引理：设 $A, B\subseteq \mathbb{N}$ ，$mexA = a, mexB = b$ ，则：

$a \oplus b = mex\{ a^* \oplus b, a \oplus b^* \ | \ a^* \in A, b^* \in B \}$ 

$a \otimes b = mex\{ (a^* \otimes b) \oplus (a \otimes b^*) \oplus (a^* \otimes b^*) \ | \ a^* \in A, b^* \in B \}$  

分配律：$\forall x,y, z \in \mathbb{N} \ (x\oplus y) \otimes z = (x \otimes z) \oplus (y \otimes z)$ 



$Fermat \ 2-power:F_n = 2^{2^n}$ 

$n < m,F_n \otimes F_m = F_nF_m$ 

$n = m, F_n \otimes F_n = \frac{3}{2}F_n$ 



逆元：$\forall a \in \mathbb{N} \ \ \exists b \in \mathbb{N} \ \ a \otimes b = 1$ ，记其为 $\frac{1}{a}$ 或 $a^{-1}$ 

计算 $\frac{1}{a}$ ：假设 $a < F_n$ ，则 $\frac{1}{a} = a^{\otimes F_n - 2}$， 其中 $a^{\otimes k} = a \otimes a \dots \otimes a$ 



假设 $G_1 = (V_1, E_1), G_2 = (V_2, E_2)$ 是两个翻硬币游戏，定义游戏 $G_1 \times G_2$ 为这两个游戏的乘积，其状态集为 $V_1 \times V_2$ ，一个移动 $(x, y) \rightarrow  (x \prime, y \prime)$ 是合法的，当且仅当 $x \rightarrow x \prime$ 和 $y \rightarrow y\prime$ 分别在 $G_1$ 和 $G_2$ 中是合法的

假设 $G_1$ 和 $G_2$ 的 $SG$ 函数分别为 $g_1(x)$ 和 $g_2(y)$ ，则 $G_1 \times G_2$ 的 $SG$ 函数为 $g(x, y) = g_1(x) \otimes g_2(y)$ 
